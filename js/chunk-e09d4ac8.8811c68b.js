(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e09d4ac8"],{"0ba9":function(e,t,a){},"2d06":function(e,t,a){"use strict";a("6fe2")},"5c3a":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"member-box"},[a("div",{staticClass:"query-wrapper"},[a("div",[a("el-form",{ref:"queryForm",attrs:{inline:!0,model:e.queryForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"我的简报"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.queryForm.type,callback:function(t){e.$set(e.queryForm,"type",t)},expression:"queryForm.type"}},e._l(e.briefs,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("div",{staticClass:"query-btn-group mt15"},[a("el-button",{attrs:{type:"primary"},on:{click:e.queryContent}},[e._v("查询")])],1)]),a("el-row",{attrs:{type:"flex",justify:"space-around"}},[a("el-col",{staticClass:"customer-list",attrs:{span:11}},[a("div",{staticClass:"add-customer customer-common"},[a("div",{staticClass:"num"},[e._v(e._s(e.newIncreCount))]),a("div",{staticClass:"title"},[e._v("新增客户数")])]),a("div",{staticClass:"contact-customer customer-common"},[a("div",{staticClass:"num"},[e._v(e._s(e.flowerCount))]),a("div",{staticClass:"title"},[e._v("联系跟进次数")])])]),a("el-col",{attrs:{span:11}})],1),a("el-row",{attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"ranks"},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[e._v("排行榜")]),a("div",{staticClass:"head-query"},[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{prop:"ranking"}},[a("el-select",{staticClass:"w100",attrs:{clearable:"",placeholder:e._f("solvePlaceholder")("select")},model:{value:e.rankForm.limit,callback:function(t){e.$set(e.rankForm,"limit",t)},expression:"rankForm.limit"}},[a("el-option",{attrs:{label:"前五名",value:"5"}}),a("el-option",{attrs:{label:"前十名",value:"10"}})],1)],1),a("el-form-item",{attrs:{prop:"range"}},[a("el-select",{staticClass:"w100",attrs:{clearable:"",placeholder:e._f("solvePlaceholder")("select")},model:{value:e.rankForm.deptId,callback:function(t){e.$set(e.rankForm,"deptId",t)},expression:"rankForm.deptId"}},e._l(e.trees,(function(t){return a("el-option",{key:e._f("solveKey")(t),attrs:{label:t.deptName,value:t.id}})})),1)],1),a("el-form-item",{attrs:{prop:"myBriefing"}},[a("el-select",{staticClass:"w100",attrs:{clearable:"",placeholder:e._f("solvePlaceholder")("select")},model:{value:e.rankForm.type,callback:function(t){e.$set(e.rankForm,"type",t)},expression:"rankForm.type"}},e._l(e.briefs,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.queryRanks}},[e._v("查询")])],1)],1)],1)]),a("div",{staticClass:"rank-list"},[a("el-table",{attrs:{data:e.rankList}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{label:"进度"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:e.row.percentage}})]}}])}),a("el-table-column",{attrs:{prop:"customerNum",label:"数量"}})],1)],1)])]),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"wait-order"},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[e._v("待办工单")])]),a("div",{staticClass:"rank-list"},[a("el-table",{attrs:{data:e.waitOrders}},[a("el-table-column",{attrs:{prop:"id",label:"工单号"}}),a("el-table-column",{attrs:{label:"工单时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("solveTime")(t.row.gmtCreateTime)))]}}])}),a("el-table-column",{attrs:{label:"工单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0==t.row.type?"跟进客户":""))]}}])}),a("el-table-column",{attrs:{prop:"task",label:"工单内容","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作 "},scopedSlots:e._u([{key:"default",fn:function(t){return 0==t.row.status?[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleTask(t.row)}}},[e._v("处理")])]:void 0}}],null,!0)})],1)],1)])])],1),a("el-row",{staticClass:"mt15",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"assign-order"},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[e._v("指派工单")])]),a("div",{staticClass:"rank-list"},[a("el-table",{attrs:{data:e.assignOrders}},[a("el-table-column",{attrs:{prop:"staffName",label:"员工名称"}}),a("el-table-column",{attrs:{prop:"id",label:"工单号"}}),a("el-table-column",{attrs:{label:"工单时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("solveTime")(t.row.gmtCreateTime)))]}}])}),a("el-table-column",{attrs:{label:"工单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0==t.row.type?"跟进客户":""))]}}])}),a("el-table-column",{attrs:{prop:"task",label:"工单内容","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"处理结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("solveResult")(t.row.status)))]}}])})],1)],1)])]),a("el-col",{attrs:{span:11}})],1),a("el-dialog",{attrs:{title:"工单处理",visible:e.dialogHandleTaskVisible},on:{"update:visible":function(t){e.dialogHandleTaskVisible=t}}},[a("el-form",{ref:"handleTaskForm",attrs:{model:e.handleTaskForm}},[a("el-form-item",{attrs:{label:"工单号",prop:"id"}},[a("el-input",{attrs:{readonly:"",placeholder:e._f("solvePlaceholder")("input")},model:{value:e.handleTaskForm.id,callback:function(t){e.$set(e.handleTaskForm,"id",t)},expression:"handleTaskForm.id"}})],1),a("el-form-item",{attrs:{label:"处理结果",prop:"status"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.handleTaskForm.status,callback:function(t){e.$set(e.handleTaskForm,"status",t)},expression:"handleTaskForm.status"}},[a("el-option",{attrs:{value:"0",label:"待处理"}}),a("el-option",{attrs:{value:"1",label:"处理完成"}}),a("el-option",{attrs:{value:"2",label:"无法处理"}})],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",row:2,placeholder:e._f("solvePlaceholder")("input")},model:{value:e.handleTaskForm.remark,callback:function(t){e.$set(e.handleTaskForm,"remark",t)},expression:"handleTaskForm.remark"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveTask("handleTaskForm")}}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.cancelTask("handleTaskForm")}}},[e._v("取消")])],1)],1)],1)},s=[],r=(a("0fb7"),a("450d"),a("f529")),o=a.n(r),n=a("eeb9"),i=a("b893"),u={name:"Dashboard",data:function(){return{queryForm:{type:"-1"},briefs:[{label:"全部",value:"-1"},{label:"昨日",value:"0"},{label:"今日",value:"1"},{label:"上周",value:"2"},{label:"本周",value:"3"},{label:"上月",value:"4"},{label:"本月",value:"5"}],flowerCount:null,newIncreCount:null,rankForm:{limit:"5",type:"3",deptId:"1"},rankList:[],waitOrders:[],trees:[],assignOrders:[],dialogHandleTaskVisible:!1,handleTaskForm:{id:"",status:"",remark:""}}},mounted:function(){var e=this;e.init()},methods:{init:function(){var e=this;e.queryContent(),e.departTree(),e.getMyTask(),e.getAssignTask()},queryContent:function(){var e=this,t=n["a"].member.getMyReport;t(e.queryForm).then((function(t){if(200==t.data.status){var a=t.data.data,l=a.flowerCount,s=a.newIncreCount;e.flowerCount=l,e.newIncreCount=s}else o.a.error(t.data.msg)}))},departTree:function(){var e=this,t=n["a"].member.deptTree;t().then((function(t){if(200==t.data.status){var a=Object(i["i"])(t.data.data);e.trees=Object(i["h"])(a,"id"),e.queryRanks()}else o.a.error(t.data.msg)}))},queryRanks:function(){var e=this,t=n["a"].member.getRanking;t(e.rankForm).then((function(t){200==t.data.status?e.rankList=t.data.data:o.a.error(t.data.msg)}))},getMyTask:function(){var e=this,t=n["a"].member.getMyTask;t().then((function(t){200==t.data.status?e.waitOrders=t.data.data:o.a.error(t.data.msg)}))},getAssignTask:function(){var e=this,t=n["a"].member.assignerTask;t().then((function(t){200==t.data.status?e.assignOrders=t.data.data:o.a.error(t.data.msg)}))},handleTask:function(e){var t=this,a=e.id,l=e.assignerId;t.handleTaskForm.id=a,t.handleTaskForm.assignerId=l,t.dialogHandleTaskVisible=!0},saveTask:function(e){var t=this;if("2"==t.handleTaskForm.status&&""==t.handleTaskForm.remark)return o.a.warning("处理结果为无法处理时备注为必填"),!1;var a=n["a"].member.handlerTask;a(t.handleTaskForm).then((function(a){200==a.data.status?(t.init(),t.$refs[e].resetFields(),t.dialogHandleTaskVisible=!1):o.a.error(a.data.msg)}))},cancelTask:function(e){var t=this;t.$refs[e].resetFields(),t.dialogHandleTaskVisible=!1}}},c=u,d=(a("2d06"),a("e7be"),a("2877")),m=Object(d["a"])(c,l,s,!1,null,"3279eb85",null);t["default"]=m.exports},"6fe2":function(e,t,a){},e7be:function(e,t,a){"use strict";a("0ba9")}}]);
//# sourceMappingURL=chunk-e09d4ac8.8811c68b.js.map