(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95bf9144"],{"0b49":function(e,t,a){},d302:function(e,t,a){"use strict";a("0b49")},ffb3:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"member-box"},[a("div",{staticClass:"query-wrapper"},[a("div",[a("el-form",{ref:"queryForm",attrs:{inline:!0,model:e.queryForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[a("el-autocomplete",{staticClass:"w100",attrs:{"value-key":"deptName","fetch-suggestions":function(t,a){return e.queryInputAsync(t,a,"customer")},placeholder:e._f("solvePlaceholder")("input")},on:{select:function(t){return e.queryInputAsync("",t,"customer",!0)}},model:{value:e.queryForm.deptName,callback:function(t){e.$set(e.queryForm,"deptName",t)},expression:"queryForm.deptName"}})],1),a("el-form-item",{attrs:{label:"员工名称",prop:"staffName"}},[a("el-input",{attrs:{placeholder:e._f("solvePlaceholder")("input")},model:{value:e.queryForm.staffName,callback:function(t){e.$set(e.queryForm,"staffName",t)},expression:"queryForm.staffName"}})],1),a("el-form-item",{attrs:{label:"员工手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:e._f("solvePlaceholder")("input")},model:{value:e.queryForm.phone,callback:function(t){e.$set(e.queryForm,"phone",t)},expression:"queryForm.phone"}})],1),a("el-form-item",{attrs:{label:"员工状态",prop:"status"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},[a("el-option",{attrs:{value:"0",label:"在职"}}),a("el-option",{attrs:{value:"1",label:"离职"}})],1)],1),a("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.queryForm.createTime,callback:function(t){e.$set(e.queryForm,"createTime",t)},expression:"queryForm.createTime"}})],1)],1)],1),a("div",{staticClass:"query-btn-group mt15"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.queryContent("query",e.pages)}}},[e._v("查询")]),a("el-button",{on:{click:function(t){return e.reset("queryForm")}}},[e._v("重置")]),a("el-button",{on:{click:function(){e.dialogFormVisible=!0,e.dialogTitle="新增"}}},[e._v("新增")])],1)]),a("el-table",{attrs:{data:e.staffs}},[a("el-table-column",{attrs:{prop:"staffId",label:"员工编号"}}),a("el-table-column",{attrs:{prop:"staffName",label:"员工名称"}}),a("el-table-column",{attrs:{prop:"departName",label:"部门名称"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"status",label:"在职状态"}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("solveTime")(t.row.gmtCreateTime)))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.tableOpera("change",t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.tableOpera("delete",t.row)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.tableOpera("quit",t.row)}}},[e._v("离职")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.tableOpera("dispatch",t.row)}}},[e._v("派工单")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.tableOpera("resetPwd",t.row)}}},[e._v("重置密码")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.tableOpera("prohibitLogin",t.row)}}},[e._v("禁止登录")])]}}])})],1),a("MemberPagination",{attrs:{total:e.total,pages:e.pages},on:{callback:function(t){return e.queryContent("query")}}}),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":function(){return e.cancelStaffs("staffsForm")}},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"staffsForm",attrs:{model:e.staffsForm}},[a("el-form-item",{attrs:{label:"员工名称",prop:"name"}},[a("el-input",{attrs:{placeholder:e._f("solvePlaceholder")("input")},model:{value:e.staffsForm.name,callback:function(t){e.$set(e.staffsForm,"name",t)},expression:"staffsForm.name"}})],1),a("el-form-item",{attrs:{label:"归属部门",prop:"deptId"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.staffsForm.deptId,callback:function(t){e.$set(e.staffsForm,"deptId",t)},expression:"staffsForm.deptId"}},e._l(e.trees,(function(t){return a("el-option",{key:e._f("solveKey")(t),attrs:{value:t.id,label:t.deptName}})})),1)],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:e._f("solvePlaceholder")("input")},model:{value:e.staffsForm.phone,callback:function(t){e.$set(e.staffsForm,"phone",t)},expression:"staffsForm.phone"}})],1),a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{placeholder:e._f("solvePlaceholder")("input")},model:{value:e.staffsForm.password,callback:function(t){e.$set(e.staffsForm,"password",t)},expression:"staffsForm.password"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.staffsForm.sex,callback:function(t){e.$set(e.staffsForm,"sex",t)},expression:"staffsForm.sex"}},[a("el-option",{attrs:{value:"0",label:"男"}}),a("el-option",{attrs:{value:"1",label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.staffsForm.roleId,callback:function(t){e.$set(e.staffsForm,"roleId",t)},expression:"staffsForm.roleId"}},e._l(e.roles,(function(t){return a("el-option",{key:e._f("solveKey")(t),attrs:{value:t.id,label:t.alias}})})),1)],1),a("el-form-item",{attrs:{label:"员工状态",prop:"status"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.staffsForm.status,callback:function(t){e.$set(e.staffsForm,"status",t)},expression:"staffsForm.status"}},e._l(e.staffStatus,(function(t,s){return a("el-option",{key:e._f("solveKey")(t),attrs:{value:s,label:t}})})),1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveStaffs("staffsForm")}}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.cancelStaffs("staffsForm")}}},[e._v("取消")])],1)],1),a("ChangePwd",{attrs:{phone:e.phone,dialogChangeVisible:e.dialogChangeVisible},on:{callback:function(t){return e.dialogChangeVisible=t}}}),a("MemberDialog",{attrs:{dialogVisible:e.dipacthVisible,dialogTitle:"派遣工单"},on:{callback:function(t){return e.dipacthVisible=t}},scopedSlots:e._u([{key:"content",fn:function(){return[a("el-form",{ref:"dispatchForm",attrs:{model:e.dispatchForm}},[a("el-form-item",{attrs:{label:"员工姓名",prop:"statffName"}},[a("el-input",{attrs:{placeholder:e._f("solvePlaceholder")("input")},model:{value:e.dispatchForm.statffName,callback:function(t){e.$set(e.dispatchForm,"statffName",t)},expression:"dispatchForm.statffName"}})],1),a("el-form-item",{attrs:{label:"工单类型",prop:"type"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.dispatchForm.type,callback:function(t){e.$set(e.dispatchForm,"type",t)},expression:"dispatchForm.type"}},[a("el-option",{attrs:{label:"跟进客户",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"工单级别",prop:"prior"}},[a("el-select",{staticClass:"w100",attrs:{placeholder:e._f("solvePlaceholder")("select")},model:{value:e.dispatchForm.prior,callback:function(t){e.$set(e.dispatchForm,"prior",t)},expression:"dispatchForm.prior"}},[a("el-option",{attrs:{label:"紧急",value:"1"}}),a("el-option",{attrs:{label:"一般",value:"2"}}),a("el-option",{attrs:{label:"暂缓",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"工单内容",prop:"task"}},[a("el-input",{attrs:{type:"textarea",row:2,maxlength:1e3,placeholder:e._f("solvePlaceholder")("input")},model:{value:e.dispatchForm.task,callback:function(t){e.$set(e.dispatchForm,"task",t)},expression:"dispatchForm.task"}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveDispatch("dispatchForm")}}},[e._v("派遣")]),a("el-button",{on:{click:function(t){return e.cancelDispatch("dispatchForm")}}},[e._v("取消")])]},proxy:!0}])})],1)},l=[],o=a("5530"),r=(a("0fb7"),a("450d"),a("f529")),n=a.n(r),i=(a("e9c4"),a("eeb9")),c=a("2d2a"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-box",attrs:{title:"修改密码",visible:e.dialogChangeVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.cancelDialog},on:{"update:visible":function(t){e.dialogChangeVisible=t}}},[a("el-form",{ref:"pwdForm",attrs:{model:e.pwdForm}},[a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{value:e.phone,readonly:"",placeholder:e._f("solvePlaceholder")("input")}})],1),a("el-form-item",{attrs:{label:"验证码",prop:"code"}},[a("el-input",{attrs:{placeholder:e._f("solvePlaceholder")("input")},model:{value:e.pwdForm.code,callback:function(t){e.$set(e.pwdForm,"code",t)},expression:"pwdForm.code"}},[a("template",{slot:"append"},[a("el-button",{staticStyle:{padding:"0 5px"},attrs:{type:"primary"},on:{click:e.getChatCode}},[e._v(e._s(e.btnName))])],1)],2)],1),a("el-form-item",{attrs:{label:"新手机号",prop:"newPassword"}},[a("el-input",{attrs:{placeholder:e._f("solvePlaceholder")("input")},model:{value:e.pwdForm.newPassword,callback:function(t){e.$set(e.pwdForm,"newPassword",t)},expression:"pwdForm.newPassword"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveDialog}},[e._v("保存")]),a("el-button",{on:{click:e.cancelDialog}},[e._v("取消")])],1)],1)},u=[],f={name:"changePwd",props:{dialogChangeVisible:{type:Boolean,default:!1},phone:{type:String,default:null}},data:function(){return{pwdForm:{code:"",newPassword:""},btnName:"获取验证码",times:60}},methods:{cancelDialog:function(){var e=this;e.$refs["pwdForm"].resetFields(),e.$emit("callback",!1)},saveDialog:function(){var e=this,t=i["a"].member.changePassword;t(Object(o["a"])(Object(o["a"])({},e.pwdForm),{},{phone:e.phone})).then((function(t){200==t.data.status?(n.a.success(t.data.msg),e.$refs["pwdForm"].resetFields(),e.$emit("callback",!1)):n.a.error(t.data.msg)}))},getChatCode:function(){var e=this,t=setInterval((function(){1==e.times?(e.btnName="获取验证码",e.times=60,clearInterval(t)):(e.times--,e.btnName="".concat(e.times,"s后重新获取"))}),1e3)}}},m=f,d=a("2877"),b=Object(d["a"])(m,p,u,!1,null,null,null),h=b.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog-box",attrs:{title:e.dialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":function(){return e.$emit("callback",!1)}},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._t("content"),a("span",{attrs:{slot:"footer"},slot:"footer"},[e._t("footer")],2)],2)},g=[],F={name:"memberDialog",props:{dialogVisible:{type:Boolean,default:!1},dialogTitle:{type:String,default:""}}},y=F,k=Object(d["a"])(y,v,g,!1,null,null,null),w=k.exports,_=a("b893"),q=a("4360"),x={name:"Staffs",data:function(){return{queryForm:{deptName:"",createTime:"",phone:"",status:"",staffName:""},queryFormCopy:{},staffs:[],belongDeparts:[],dialogFormVisible:!1,dialogTitle:"",staffsForm:{name:"",departId:"",password:"",phone:"",status:"",sex:"",roleId:""},pages:{pageNum:1,pageSize:10},total:null,roles:[],phone:"",dialogChangeVisible:!1,trees:[],staffStatus:["在职","在职禁止登录","离职","删除"],dipacthVisible:!1,dispatchForm:{statffName:"",type:"",prior:"",task:""}}},components:{MemberPagination:c["a"],ChangePwd:h,MemberDialog:w},mounted:function(){var e=this;e.init()},methods:{init:function(){var e=this;e.queryContent("query",e.pages),e.getRoles(),e.departTree()},queryInputAsync:function(e,t,a,s){var l=this,o=i["a"].member.deptTree;if(s){var r=t.id;l.queryForm.deptId=r}else o().then((function(e){if(200==e.data.status){var a=Object(_["i"])(e.data.data),s=Object(_["h"])(a,"id");t(s)}else n.a.error(e.data.msg)}))},queryContent:function(e,t){var a=this,s=i["a"].member.flowerCustomerPage,l="query"==e?Object(o["a"])({},a.queryForm):"pagination"==e?Object(o["a"])({},a.queryFormCopy):{};l=t?Object(o["a"])(Object(o["a"])({},l),t):Object(o["a"])(Object(o["a"])({},l),a.pages),a.queryForm.createTime[0]&&(l.startDate=Object(_["a"])(a.queryForm.createTime[0])),a.queryForm.createTime[1]&&(l.endDate=Object(_["a"])(a.queryForm.createTime[1])),s(l).then((function(e){if(200==e.data.status){var t=e.data.data||{},s=t.records,l=t.total;a.total=l,a.staffs=s}else n.a.error(e.data.msg)}))},reset:function(e){var t=this;t.$refs[e].resetFields()},tableOpera:function(e,t){var a=this,s=i["a"].member.banOrFire,l=t.staffId,r=t.phone;switch(e){case"change":a.dialogFormVisible=!0,a.dialogTitle="修改";var c=Object(o["a"])(Object(o["a"])({},a.staffsForm),JSON.parse(JSON.stringify(t)));console.log("tx",c);break;case"delete":case"prohibitLogin":case"quit":a.$confirm("是否操作此数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="delete"==e?3:"prohibitLogin"==e?1:"quit"==e?2:null;s({staffId:l,status:t}).then((function(e){200==e.data.status?(n.a.success(e.data.msg),a.queryContent("query",a.pages)):n.a.error(e.data.msg)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}));break;case"dispatch":a.dispatchForm.staffId=l,a.dipacthVisible=!0;break;case"resetPwd":a.phone=r,a.dialogChangeVisible=!0;break;default:break}},saveStaffs:function(e){var t=this,a=i["a"].member.addStaff;a(t.staffsForm).then((function(a){200==a.data.status?(n.a.success(a.data.msg),t.queryContent("query",t.pages),t.$refs[e].resetFields(),t.dialogFormVisible=!1):n.a.error(a.data.msg)}))},cancelStaffs:function(e){var t=this;t.$refs[e].resetFields(),t.dialogFormVisible=!1},getRoles:function(){var e=this,t=i["a"].member.getRoles;t({roleId:q["a"].state.user.userInfo.roleId}).then((function(t){200==t.data.status?e.roles=t.data.data:n.a.error(t.data.msg)}))},departTree:function(){var e=this,t=i["a"].member.deptTree;t().then((function(t){if(200==t.data.status){var a=Object(_["i"])(t.data.data);e.trees=Object(_["h"])(a,"id")}else n.a.error(t.data.msg)}))},saveDispatch:function(e){var t=this,a=i["a"].member.handlerTask;a(t.dispatchForm).then((function(a){200==a.data.status?(n.a.success(a.data.msg),t.queryContent("query",t.pages),t.dipacthVisible=!1,t.$refs[e].resetFields()):n.a.error(a.data.msg)}))},cancelDispatch:function(e){var t=this;t.dipacthVisible=!1,t.$refs[e].resetFields()}}},C=x,$=(a("d302"),Object(d["a"])(C,s,l,!1,null,"1ea2e0ea",null));t["default"]=$.exports}}]);
//# sourceMappingURL=chunk-95bf9144.af755f4d.js.map